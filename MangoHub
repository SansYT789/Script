-- =================================
-- ðŸŸ£ MangoHub - Anti AFK Full Pack + ESP (Fixed)
-- =================================

--// Load WindUI
local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

--// Anti AFK Settings
getgenv().AntiAFK_Mode = "auto"
getgenv().AntiAFK_Enabled = false
getgenv().AntiAFK_Connection = nil
getgenv().ESP_Enabled = false

--// Main Window
local Window = WindUI:CreateWindow({
    Title = "MangoHub",
    Icon = "shield",
    Author = "Made By Group Vinreach",
    Folder = "Mango",
    Size = UDim2.fromOffset(450, 400),
    Theme = "Dark"
})

--// Sections
local MainSection = Window:Section({ Title = "Main Features", Opened = true })
local SettingsSection = Window:Section({ Title = "Settings", Opened = true })
local MiscSection = Window:Section({ Title = "Misc", Opened = true }) -- thÃªm Misc

--// Tabs
local MainTab = MainSection:Tab({ Title = "Main", Icon = "house" })
local AutoTab = MainSection:Tab({ Title = "Automatic", Icon = "mouse-pointer-click" })
local ConfigTab = SettingsSection:Tab({ Title = "Configuration", Icon = "settings" })
local MiscTab = MiscSection:Tab({ Title = "ESP", Icon = "eye" }) -- ESP Tab

--// ESP Feature
MiscTab:Paragraph({
    Title = "ESP System",
    Desc = "Toggle ESP to highlight Eggs",
    Image = "eye",
    ImageSize = 16,
    Color = Color3.fromHex("#ffcc00")
})

MiscTab:Toggle({
    Title = "Enable ESP",
    Desc = "Highlight all Egg objects",
    Value = false,
    Callback = function(state)
        getgenv().ESP_Enabled = state

        if state then
            WindUI:Notify({
                Title = "ESP Enabled",
                Content = "Eggs will now be highlighted!",
                Icon = "eye",
                Duration = 3
            })

            -- Simple ESP cho Eggs
            task.spawn(function()
                while getgenv().ESP_Enabled do
                    for _, obj in ipairs(workspace:GetDescendants()) do
                        if obj:IsA("MeshPart") or obj:IsA("Part") then
                            if string.find(obj.Name:lower(), "egg") then
                                if not obj:FindFirstChild("ESP_Billboard") then
                                    local bb = Instance.new("BillboardGui", obj)
                                    bb.Name = "ESP_Billboard"
                                    bb.Size = UDim2.new(0,100,0,20)
                                    bb.AlwaysOnTop = true
                                    bb.StudsOffset = Vector3.new(0,2,0)

                                    local label = Instance.new("TextLabel", bb)
                                    label.Size = UDim2.new(1,0,1,0)
                                    label.BackgroundTransparency = 1
                                    label.Text = "[ðŸ¥š Egg]"
                                    label.TextColor3 = Color3.fromRGB(255,255,0)
                                    label.TextScaled = true
                                    label.Font = Enum.Font.GothamBold
                                end
                            end
                        end
                    end
                    task.wait(2)
                end
            end)
        else
            for _, obj in ipairs(workspace:GetDescendants()) do
                if obj:FindFirstChild("ESP_Billboard") then
                    obj.ESP_Billboard:Destroy()
                end
            end
            WindUI:Notify({
                Title = "ESP Disabled",
                Content = "Egg highlights removed!",
                Icon = "x",
                Duration = 3
            })
        end
    end
})
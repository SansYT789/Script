-- =================================
-- üü£ MangoHub - Anti AFK + ESP Egg
-- =================================

--// Load WindUI
local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

--// Anti AFK Settings
getgenv().AntiAFK_Mode = "auto"
getgenv().AntiAFK_Enabled = false
getgenv().AntiAFK_Connection = nil

--// Main Window
local Window = WindUI:CreateWindow({
    Title = "MangoHub",
    Icon = "shield",
    Author = "Made By Group Vinreach",
    Folder = "Mango",
    Size = UDim2.fromOffset(450, 500),
    Theme = "Dark"
})

--// Sections
local MainSection = Window:Section({ Title = "Main Features", Opened = true })
local SettingsSection = Window:Section({ Title = "Settings", Opened = true })
local ESPSection = Window:Section({ Title = "ESP Features", Opened = true })

--// Tabs
local MainTab = MainSection:Tab({ Title = "Main", Icon = "home", Desc = "Main information and links" })
local AntiAFKTab = MainSection:Tab({ Title = "Anti AFK", Icon = "shield", Desc = "Prevent AFK kick" })
local ConfigTab = SettingsSection:Tab({ Title = "Configuration", Icon = "settings", Desc = "UI and system settings" })
local ESPTab = ESPSection:Tab({ Title = "ESP", Icon = "eye", Desc = "ESP for eggs" })

--// Main Tab
MainTab:Paragraph({ Title = "Version: 1.0 [ Demo ]", Desc = "MangoHub - Made By Group Vinreach", Image = "info", ImageSize = 18, Color = Color3.fromHex("#30ff6a") })
MainTab:Divider()
MainTab:Button({
    Title = "Join Discord",
    Icon = "message-circle",
    Variant = "Primary",
    Callback = function()
        setclipboard("https://discord.gg/vinreach")
        WindUI:Notify({ Title = "Discord Link Copied!", Content = "Paste in browser to join", Icon = "clipboard", Duration = 4 })
    end
})
MainTab:Paragraph({ Title = "Features", Desc = "‚Ä¢ Anti AFK System\n‚Ä¢ Multiple Detection Modes\n‚Ä¢ Auto Random Actions\n‚Ä¢ Easy Configuration", Image = "list", ImageSize = 16, Color = Color3.fromHex("#667eea") })

--// Anti AFK Tab empty (you requested)

--// Config Tab
ConfigTab:Paragraph({ Title = "Version: 1.0 [ Demo ]", Desc = "MangoHub Anti AFK System", Image = "info", ImageSize = 18, Color = Color3.fromHex("#30ff6a") })
ConfigTab:Divider()
ConfigTab:Paragraph({ Title = "Anti AFK Mode", Desc = "Choose how system keeps you active", Image = "settings", ImageSize = 16, Color = "White" })

ConfigTab:Dropdown({
    Title = "Choose Mode",
    Values = {"auto", "click", "jump", "rotate"},
    Value = "auto",
    Callback = function(value)
        getgenv().AntiAFK_Mode = value
        WindUI:Notify({ Title = "Mode Changed", Content = "Anti AFK Mode set to: " .. value, Icon = "settings", Duration = 2 })
        print("üîß Anti AFK Mode set to: " .. value)
    end
})

ConfigTab:Button({
    Title = "Toggle Anti AFK",
    Icon = "power",
    Variant = "Primary",
    Callback = function()
        getgenv().AntiAFK_Enabled = not getgenv().AntiAFK_Enabled
        local status = getgenv().AntiAFK_Enabled
        WindUI:Notify({ Title = "Anti AFK", Content = status and "Enabled!" or "Disabled!", Icon = status and "check" or "x", Duration = 3 })
        print("‚úÖ Anti AFK: " .. tostring(status))

        if status then
            local Players = game:GetService("Players")
            local VirtualUser = game:GetService("VirtualUser")
            local Camera = workspace.CurrentCamera
            local Player = Players.LocalPlayer

            if getgenv().AntiAFK_Connection then
                getgenv().AntiAFK_Connection:Disconnect()
            end

            getgenv().AntiAFK_Connection = Player.Idled:Connect(function()
                if not getgenv().AntiAFK_Enabled then return end
                local mode = getgenv().AntiAFK_Mode
                if mode == "auto" then
                    local modes = {"click","jump","rotate"}
                    mode = modes[math.random(1,#modes)]
                end

                if mode == "click" then
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton2(Vector2.new())
                    print("üñ±Ô∏è Fake Click")
                elseif mode == "jump" then
                    local humanoid = Player.Character and Player.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid then humanoid.Jump = true print("ü¶ò Jump") end
                elseif mode == "rotate" then
                    if Camera then Camera.CFrame = Camera.CFrame * CFrame.Angles(0, math.rad(30), 0) print("üé• Rotate Camera") end
                end
            end)
        else
            if getgenv().AntiAFK_Connection then
                getgenv().AntiAFK_Connection:Disconnect()
                getgenv().AntiAFK_Connection = nil
            end
        end
    end
})

ConfigTab:Divider()
ConfigTab:Paragraph({ Title = "UI Customization", Desc = "Adjust interface settings", Image = "palette", ImageSize = 16, Color = Color3.fromHex("#667eea") })

ConfigTab:Dropdown({
    Title = "Select Theme",
    Values = {"Dark","Light"},
    Value = "Dark",
    Callback = function(theme)
        WindUI:SetTheme(theme)
        WindUI:Notify({ Title = "Theme Changed", Content = "Switched to " .. theme .. " theme", Icon = "palette", Duration = 2 })
    end
})

ConfigTab:Toggle({
    Title = "Show Notifications",
    Desc = "Enable system notifications",
    Value = true,
    Callback = function(state)
        WindUI:Notify({ Title = "Notifications", Content = state and "Enabled" or "Disabled", Duration = 2 })
    end
})

--// ESP Egg Tab
local ESPEnabled = false
local truePetMap = {}

local function getRealPetName(eggModel)
    local val = eggModel:FindFirstChild("PetName")
    if val and val:IsA("StringValue") then return val.Value end
    return "Unknown"
end

local function getPlayerGardenEggs(radius)
    local eggs = {}
    local player = game:GetService("Players").LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local root = char:FindFirstChild("HumanoidRootPart")
    if not root then return eggs end
    local petTable = {} -- your table of known pets if needed

    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and petTable[obj.Name] then
            local dist = (obj:GetPivot().Position - root.Position).Magnitude
            if dist <= (radius or 60) then
                local realPet = getRealPetName(obj)
                truePetMap[obj] = realPet
                table.insert(eggs, obj)
            end
        end
    end
    return eggs
end

-- Apply ESP visuals
local function applyEggESP(egg, name)
    if not egg or not egg.PrimaryPart then return end
    if egg:FindFirstChild("ESP_Billboard") then egg.ESP_Billboard:Destroy() end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_Billboard"
    billboard.Adornee = egg.PrimaryPart
    billboard.Size = UDim2.new(0,100,0,50)
    billboard.AlwaysOnTop = true

    local textLabel = Instance.new("TextLabel", billboard)
    textLabel.Size = UDim2.new(1,0,1,0)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = name or "Unknown Egg"
    textLabel.TextColor3 = Color3.fromRGB(255,255,0)
    textLabel.TextStrokeTransparency = 0
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextScaled = true

    billboard.Parent = game:GetService("CoreGui")
end

-- ESP Toggle
ESPTab:Toggle({
    Title = "Enable ESP",
    Desc = "Show nearby eggs",
    Value = false,
    Callback = function(state)
        ESPEnabled = state
        WindUI:Notify({ Title = "ESP", Content = state and "Enabled!" or "Disabled!", Icon = "eye", Duration = 2 })
        print("üëÄ ESP Enabled:", ESPEnabled)
    end
})

-- Render Loop
game:GetService("RunService").RenderStepped:Connect(function()
    if not ESPEnabled then return end
    for _, egg in pairs(getPlayerGardenEggs(60)) do
        applyEggESP(egg, truePetMap[egg] or getRealPetName(egg))
    end
end)

--// Startup Notification
WindUI:Notify({ Title = "MangoHub Loaded!", Content = "Anti AFK + ESP ready", Icon = "check-circle", Duration = 3 })

--// Cleanup
Window:OnClose(function()
    if getgenv().AntiAFK_Connection then
        getgenv().AntiAFK_Connection:Disconnect()
        getgenv().AntiAFK_Connection = nil
    end
    getgenv().AntiAFK_Enabled = false
end)